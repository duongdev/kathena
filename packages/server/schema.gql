# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type Account implements BaseModel {
  id: ID!
  orgId: ID!
  createdAt: DateTime!
  updatedAt: DateTime!
  username: String!
  email: String!
  displayName: String
  status: AccountStatus!
  roles: [String!]!
  availability: AccountAvailability!
}

interface BaseModel {
  id: ID!
  orgId: ID!
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

"""Status of an account."""
enum AccountStatus {
  Pending
  Active
  Deactivated
}

enum AccountAvailability {
  Online
  Offline
  Away
}

type Org implements BaseModel {
  id: ID!
  orgId: ID!
  createdAt: DateTime!
  updatedAt: DateTime!
  namespace: String!
  name: String!
}

type AuthenticatePayload {
  account: Account!
  org: Org!
  permissions: [Permission!]!
}

enum Permission {
  Hr_Access
  Hr_CreateOrgAccount
  Hr_ListOrgAccounts
  Hr_UpdateOrgAccount
  Academic_CreateAcademicSubject
  Academic_ListAcademicSubjects
  Academic_SetAcademicSubjectPublication
  OrgOffice_CreateOrgOffice
  NoPermission
}

type SignInPayload {
  token: String!
  account: Account!
  org: Org!
  permissions: [Permission!]!
}

type AcademicSubject implements BaseModel {
  id: ID!
  orgId: ID!
  createdAt: DateTime!
  updatedAt: DateTime!
  name: String!
  code: String!
  description: String!
  publication: Publication!
  imageFileId: String!
}

enum Publication {
  Draft
  Published
}

type AcademicSubjectsPayload {
  academicSubjects: [AcademicSubject!]!
  count: Int!
}

type OrgAccountsPayload {
  accounts: [Account!]!
  count: Int!
}

type OrgOffice implements BaseModel {
  id: ID!
  orgId: ID!
  createdAt: DateTime!
  updatedAt: DateTime!
  name: String!
  address: String!
  phone: String!
}

type Query {
  account(id: ID!): Account
  orgAccounts(pageOptions: PageOptionsInput!, orgId: ID!): OrgAccountsPayload!
  authenticate: AuthenticatePayload!
  academicSubjects(pageOptions: PageOptionsInput!, orgId: ID!): AcademicSubjectsPayload!
}

input PageOptionsInput {
  skip: Int!
  limit: Int!
}

type Mutation {
  createOrgAccount(input: CreateAccountInput!): Account!
  updateAccount(updateInput: UpdateAccountInput!, id: ID!): Account!
  signIn(
    password: String!

    """Could be username or email"""
    identity: String!
    orgNamespace: String!
  ): SignInPayload!
  createAcademicSubject(input: CreateAcademicSubjectInput!): AcademicSubject!
  createOrgOffice(input: CreateOrgOfficeInput!): OrgOffice!
}

input CreateAccountInput {
  username: String!
  email: String!
  displayName: String
  roles: [String!]!
}

input UpdateAccountInput {
  username: String
  email: String
  displayName: String
  roles: [String!]
  password: String
}

input CreateAcademicSubjectInput {
  name: String!
  code: String!
  description: String = ""
  image: Upload!
}

"""The `Upload` scalar type represents a file upload."""
scalar Upload

input CreateOrgOfficeInput {
  name: String!
  address: String!
  phone: String!
}
